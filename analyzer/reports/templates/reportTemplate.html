<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700&family=Manrope:wght@400;500;600;700&display=swap"
      rel="stylesheet" />
    <link rel="stylesheet" href="./index.css" />
    <title>Daxa Report</title>
  </head>
  <body>
    <section class="cover-page pl-23 pr-23 pt-42">
      <div class="surface-60 inter font-48 font-thin">Data Report</div>
      <div class="mt-9">
        <div class="surface-60 inter font-48 font-thin">
          {{data.framework.name|capitalize}}
        </div>
        <div class="purple-10 inter font-28 mt-2">
          Langchain {{data.framework.version}}
        </div>
      </div>
      <div class="mt-11">
        <div class="purple-10 font-13 inter font-thin">
          Application Owner: {{ data.reportSummary.owner }}
        </div>
        <div class="purple-10 font-13 inter font-thin mt-2">
          Report Generated On {{ date.strftime('%B %d, %Y') }}
        </div>
      </div>
    </section>
    <!-- <section class="bg-main p-0">
      <div class="header flex justify-between inter pt-8 pb-8 pl-8 pr-8">
        <div class="flex mt-auto">
          <div class="flex items-center">
            <img src="../assets/app-logo.svg" />
          </div>
          <div class="flex flex-col ml-2">
            <div class="flex items-center">
              <div class="font-14 surface-100">{{ data.name }}</div>
              <img class="ml-1" src="../assets/aws-logo.svg" />
            </div>
            <div class="flex surface-60 font-10 mt-1">
              <div>
                {{ data.framework.name|capitalize }} {{ data.framework.version
                }}
              </div>
              <div class="divider bg-surface-60 ml-2"></div>
              <div class="ml-2">Owner: {{ data.reportSummary.owner }}</div>
            </div>
          </div>
        </div>
        <div class="flex justify_content surface-60 flex-col gap-1 text-end">
          <div class="font-14">Data Report</div>
          <div class="font-12">
            Generated On: {{ date.strftime('%B %d, %Y') }}
          </div>
        </div>
      </div>
      <div class="content pt-4 pr-9 pb-4 pl-9">
        <div class="mb-3">
          <div class="font-10 medium inline inter">
            Description:
            <span class="normal">{{data.description}}</span>
          </div>
        </div>
        <div class="card mb-3">
          <div class="pt-2 pl-3 pb-2 pr-3">
            <div class="card__title inter items-center">
              <div class="heading font-12 medium">Report Summary</div>
              <div class="sub-heading font-10 ml-2">
                Current Load By {{ data.reportSummary.owner }}, {{
                data.reportSummary.createdAt }}
              </div>
            </div>
            <div class="card__body flex gap-13">
              <div class="key--value">
                <div class="manrope font-22 critical semi-bold">
                  {{ data.reportSummary.findings|default('0') }}
                </div>
                <div class="inter font-10 surface-10">Findings</div>
              </div>
              <div class="key--value ml-13">
                <div class="manrope font-22 critical semi-bold text-start">
                  {{ data.reportSummary.filesWithRestrictedData|default('0') }}
                  <span class="surface-10 font-12 normal pb-1 mt-auto"
                    >/{{ data.reportSummary.totalFiles|default('0') }}</span
                  >
                </div>

                <div class="inter font-10 surface-10">Files With Findings</div>
              </div>
              <div class="key--value ml-13">
                <div class="manrope font-22 surface-10 semi-bold">
                  {{ data.reportSummary.dataSources|default('0') }}
                </div>
                <div class="inter font-10 surface-10">
                  Number of Data Source
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="card inter mb-3">
          <div class="pt-2 pl-3 pb-2 pr-3">
            <div class="heading font-12 medium">
              Top 5 Files With Most Findings
            </div>
            <table class="fixed mt-3">
              <thead class="inter font-10 surface-50">
                <tr class="bg-main">
                  <th class="text-start medium">Filename</th>
                  <th></th>
                  <th></th>
                  <th class="text-start medium">Findings</th>
                </tr>
              </thead>
              <tbody class="inter surface-10 font-10">
                {% for item in data.topFindings %}
                <tr>
                  <td colspan="3">
                    <div class="w-90 break-word">
                      {{ item.fileName|default('-') }}
                    </div>
                  </td>
                  <td>
                    <div class="bar__graph flex gap-10px">
                      <div>{{ item.count|default('-') }}</div>
                    </div>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
        <div class="card inter mb-3">
          <div class="pt-2 pl-3 pb-2 pr-3">
            <div class="card__title">
              <div class="heading medium font-12">Instance Details</div>
            </div>
            <div class="card__body">
              <table class="fixed">
                <colgroup>
                  <col width="25%" />
                  <col width="25%" />
                  <col width="25%" />
                  <col width="25%" />
                </colgroup>
                <tbody>
                  <tr>
                    <td class="border-none font-10">
                      <div class="card__body--details flex">
                        <div class="divider bg-surface-70"></div>
                        <div class="flex flex-col ml-2 w-fit">
                          <div class="surface-40">IP</div>
                          <div class="surface-10 mt-1 break-word">
                            {{ data.instanceDetails.ip }}
                          </div>
                        </div>
                      </div>
                    </td>
                    <td class="border-none font-10">
                      <div class="card__body--details flex ml-5">
                        <div class="divider bg-surface-70"></div>
                        <div class="flex flex-col ml-2 w-100">
                          <div class="surface-40">Created At</div>
                          <div class="surface-10 mt-1 w-120 break-word">
                            {{ data.instanceDetails.createdAt }}
                          </div>
                        </div>
                      </div>
                    </td>
                    <td class="border-none font-10">
                      <div class="card__body--details flex ml-5">
                        <div class="divider bg-surface-70"></div>
                        <div class="flex flex-col ml-2 w-fit">
                          <div class="surface-40">Runtime</div>
                          <div class="surface-10 mt-1 break-word">
                            {{ data.instanceDetails.runtime }}
                          </div>
                        </div>
                      </div>
                    </td>
                    <td class="border-none font-10">
                      <div class="card__body--details flex ml-5">
                        <div class="divider bg-surface-70"></div>
                        <div class="flex flex-col ml-2 w-fit">
                          <div class="surface-40">Language Version</div>
                          <div class="surface-10 mt-1 break-word">
                            {{ data.instanceDetails.languageVersion }}
                          </div>
                        </div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td class="border-none font-10">
                      <div class="card__body--details flex">
                        <div class="divider bg-surface-70"></div>
                        <div class="flex flex-col ml-2 w-fit">
                          <div class="surface-40">Host</div>
                          <div class="surface-10 mt-1 break-word">
                            {{ data.instanceDetails.host }}
                          </div>
                        </div>
                      </div>
                    </td>
                    <td class="border-none font-10">
                      <div class="card__body--details flex ml-5">
                        <div class="divider bg-surface-70"></div>
                        <div class="flex flex-col ml-2 w-fit">
                          <div class="surface-40">Language</div>
                          <div class="surface-10 mt-1 break-word">
                            {{ data.instanceDetails.language }}
                          </div>
                        </div>
                      </div>
                    </td>
                    <td class="border-none font-10" colspan="2">
                      <div class="card__body--details flex ml-5">
                        <div class="divider bg-surface-70"></div>
                        <div class="flex flex-col ml-2 w-100">
                          <div class="surface-40">Path</div>
                          <div class="surface-10 mt-1 break-word w-300">
                            {{ data.instanceDetails.path }}
                          </div>
                        </div>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="card inter">
          <div class="pt-2 pl-3 pb-2 pr-3">
            <div class="card__title">
              <div class="heading font-12">Load History</div>
            </div>
            <div class="card__body">
              <table class="fixed">
                <thead class="inter font-10 surface-50">
                  <tr>
                    <th class="text-start medium">Report Name</th>
                    <th class="text-start medium text-end">Findings</th>
                    <th class="text-start medium text-end">
                      Files With Findings
                    </th>
                    <th class="text-start medium text-end">Generated On</th>
                  </tr>
                </thead>
                <tbody class="inter surface-10 font-10">
                  <tr>
                    <td>-</td>
                    <td class="text-end">-</td>
                    <td class="text-end">-</td>
                    <td class="text-end">-</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </section> -->

    <section class="p-0">
      <div class="bg-white pl-13 pr-13 pt-8 pb-8">
        <div class="medium flex inter items-center">
          <div class="surface-10 font-13">Description:</div>
          <div class="normal surface-10-opacity font-12 ml-1">
            {{data.description}}
          </div>
        </div>
      </div>
      <div class="bg-main pt-12 pb-10 pl-13 pr-13">
        <div class="inter flex items-center">
          <div class="surface-10 font-14">Report Summary</div>
          <div class="surface-10-opacity font-12 ml-2">
            Current Load By {{ data.reportSummary.owner }}, {{
            data.reportSummary.createdAt }}
          </div>
        </div>
        <div class="flex inter">
          <div>
            <div class="critical font-64 manrope font-thin">
              {{ data.reportSummary.findings|default('0') }}
            </div>
            <div class="surface-10 font-13">Findings</div>
          </div>
          <div class="ml-24 font-thin manrope">
            <div class="manrope font-64 critical text-start inline-flex">
              {{ data.reportSummary.filesWithRestrictedData|default('0') }}
              <span class="surface-10 font-32 normal pb-1 mt-auto"
                >/{{ data.reportSummary.totalFiles|default('0') }}</span
              >
            </div>
            <div class="surface-10 font-13">Files With Findings</div>
          </div>
          <div class="ml-24">
            <div class="surface-10 font-64 manrope font-thin">
              {{ data.reportSummary.dataSources|default('0') }}
            </div>
            <div class="surface-10 font-13">Number of Data Source</div>
          </div>
        </div>
      </div>
      <div class="bg-white pt-10 pb-10 pl-13 pr-13">
        <div>
          <div class="surface-10 font-14 inter medium">
            Top Files With Most Findings
          </div>
          <div class="mt-3 inter">
            <table class="fixed">
              <thead class="font-12">
                <tr>
                  <th class="medium">File Name</th>
                  <th></th>
                  <th class="medium text-end">Findings - Topics</th>
                  <th class="medium text-end">Findings - Entities</th>
                  <th class="medium">Owner</th>
                </tr>
              </thead>
              <tbody class="surface-10 font-13">
                {% for item in data.topFindings %}
                <tr>
                  <td colspan="2">{{ item.fileName|default('-') }}</td>
                  <td class="text-end">{{ item.count|default('-') }}</td>
                  <td class="text-end">-</td>
                  <td>-</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
        <div class="mt-12">
          <div class="inter flex items-center">
            <div class="surface-10 font-14 medium">Load History</div>
            <div class="surface-10-opacity ml-2 font-12">Last 5 Reports</div>
          </div>
          <div class="mt-3 inter">
            <table class="fixed">
              <thead class="font-12">
                <tr>
                  <th class="medium">Report Name</th>
                  <th></th>
                  <th class="medium text-end">Findings</th>
                  <th class="medium text-end">Files With Findings</th>
                  <th class="medium text-end">Generated On</th>
                </tr>
              </thead>
              <tbody class="surface-10 font-13">
                <tr>
                  <td colspan="2">-</td>
                  <td class="text-end">-</td>
                  <td class="text-end">-</td>
                  <td class="text-end">-</td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="mt-3 surface-10-opacity font-11 inter">
            Find more reports on: {{ default('-') }}
          </div>
        </div>
        <div class="mt-12">
          <div class="surface-10 font-14 inter medium">Instance Details</div>
          <div class="mt-3 inter">
            <table class="fixed">
              <colgroup>
                <col width="33%" />
                <col width="33%" />
                <col width="33%" />
              </colgroup>
              <tbody>
                <tr>
                  <td class="border-none font-13 pl-0">
                    <div class="card__body--details flex">
                      <div class="divider bg-surface-70"></div>
                      <div class="flex flex-col ml-2">
                        <div class="surface-40 font-12">IP</div>
                        <div class="surface-10 mt-1">
                          {{ data.instanceDetails.ip }}
                        </div>
                      </div>
                    </div>
                  </td>
                  <td class="border-none font-13 pl-0">
                    <div class="card__body--details flex">
                      <div class="divider bg-surface-70"></div>
                      <div class="flex flex-col ml-2">
                        <div class="surface-40 font-12">Runtime</div>
                        <div class="surface-10 mt-1">
                          {{ data.instanceDetails.runtime }}
                        </div>
                      </div>
                    </div>
                  </td>
                  <td class="border-none font-13 pl-0">
                    <div class="card__body--details flex">
                      <div class="divider bg-surface-70"></div>
                      <div class="flex flex-col ml-2">
                        <div class="surface-40 font-12">Language</div>
                        <div class="surface-10 mt-1">
                          {{ data.instanceDetails.language }}
                        </div>
                      </div>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td class="border-none font-13 pl-0">
                    <div class="card__body--details flex">
                      <div class="divider bg-surface-70"></div>
                      <div class="flex flex-col ml-2">
                        <div class="surface-40 font-12">Created At</div>
                        <div class="surface-10 mt-1">
                          {{ data.instanceDetails.createdAt }}
                        </div>
                      </div>
                    </div>
                  </td>
                  <td class="border-none font-13 pl-0">
                    <div class="card__body--details flex">
                      <div class="divider bg-surface-70"></div>
                      <div class="flex flex-col ml-2">
                        <div class="surface-40 font-12">Host</div>
                        <div class="surface-10 mt-1">
                          {{ data.instanceDetails.host }}
                        </div>
                      </div>
                    </div>
                  </td>
                  <td></td>
                </tr>
                <tr>
                  <td class="border-none font-13 pl-0" colspan="3">
                    <div class="card__body--details flex">
                      <div class="divider bg-surface-70"></div>
                      <div class="flex flex-col ml-2">
                        <div class="surface-40 font-12">Path</div>
                        <div class="surface-10 mt-1 break-word">
                          {{ data.instanceDetails.path }}
                        </div>
                      </div>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>
    <section>
      <div>
        <div class="surface-10 inter font-14 medium flex">
          <div>Data Source 1:</div>
          <img class="ml-1" src="../assets/aws_s3.png" alt="S3 logo" />
          <div class="ml-1">{{ datastores.name }}</div>
        </div>
        <div class="surface-10-opacity inter font-12 flex">
          <div>Source: {{ datastores.sourcePath }}</div>
          <div class="divider bg-surface-10-opacity ml-2"></div>
          <div class="ml-2">Size: -</div>
        </div>
      </div>

      <table class="mt-4 fixed">
        <thead class="font-12 inter">
          <tr>
            <th class="text-start">Finding Type</th>
            <th class="text-start">Finding</th>
            <th class="text-end">Source Files</th>
            <th class="text-end">Snippets</th>
          </tr>
        </thead>
        <tbody class="surface-10 font-13 inter">
          {% for item in datastores.findingsSummary %}
          <tr>
            <td>{{ item.findingsType|capitalize }}</td>
            <td>{{item.labelName}}</td>
            <td class="text-end">{{item.fileCount}}</td>
            <td class="text-end">{{item.snippetCount}}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </section>
    <section>
      <div>
        <div class="inter flex items-center">
          <div class="font-14 surface-10">Snippets</div>
          <!--<div class="font-12 surface-10-opacity ml-2">
            Showing {{ findingDetails.length }} out of 
          </div>-->
        </div>
        {% for item in findingDetails %}
        <div class="mt-4">
          <div class="flex bg-main pt-2 pb-2 pl-3 pr-3 inter items-center">
            <div class="surface-10 font-13">{{ item.labelName }}</div>
            <div class="sub-heading ml-2 surface-50 font-12">
              Showing {{ item.count }} Snippets out of {{ item.snippetCount }}
            </div>
          </div>
          {% for snippet in item.snippets %}
          <div class="key-value">
            <div class="surface-50 font-12">Snippet</div>
            <div class="surface-10 font-13 mt-2">{{ snippet.snippet }}</div>
          </div>
          <div class="key-value">
            <div class="surface-50 font-12">Retrieved From</div>
            <div class="surface-10 font-13 mt-2">{{ snippet.sourcePath }}</div>
          </div>
          <div
            class="divider-horizontal bg-surface-10-opacity-20 mt-4 mb-4"></div>
          {% endfor %}
        </div>
        {% endfor %}
      </div>
    </section>
  </body>
</html>
